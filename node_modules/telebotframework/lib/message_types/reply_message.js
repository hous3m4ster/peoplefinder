"use strict";

/************
 * Requires *
 ************/

var TextMessage = require("./text_message");
var Message = require("./message");

/**************************
 * The ReplyMessage class *
 **************************/

/**
 * A message which contains a reply to a message
 *
 * @extends TextMessage
 */
class ReplyMessage extends TextMessage {
	/**
	 * Creates a new ReplyMessage object
	 *
	 * @param {Object}Â message	A raw message object from an update
	 * @param {BotAPI} API	An instance of a BotAPI from teleapiwrapper which will be used to do stuff with this message
	 *
	 * @private
	 */
	constructor(message, API) {
		// Call the super constructor
		super(message, API);

		/**
		 * The original message, which this one is a reply to
		 *
		 * @private
		 */
		this._original = new Message(this.rawMessage.reply_to_message, this._API);
	}

	/**
	 * The replied-to [message]{@link https://core.telegram.org/bots/api#message}. Note that it may be any type of message. If it matters, you have to check which type it is yourself
	 *
	 * @type {Object}
	 * @readonly
	 */
	get originalMessage() {
		return this._original;
	}

	/**
	 * The original sender of the message, not the one who replied
	 *
	 * @type {Object}
	 * @property {Integer} id	ID of the sender
	 * @property {String} first_name	First name of the sender
	 * @property {String} [last_name]	Last name of the sender
	 * @property {String} [username]	Username of the sender
	 * @readonly
	 */
	get originalSender() {
		return this.original.sender;
	}

	/**
	 * The timestamp of the original message, not the reply
	 *
	 * @type {Integer}
	 * @readonly
	 */
	get originalDate() {
		return this.original.date;
	}
}

/***********
 * Exports *
 ***********/

module.exports = ReplyMessage;

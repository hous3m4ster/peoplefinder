"use strict";

/************
 * Requires *
 ************/

var TextMessage = require("./text_message");

/****************************
 * The ForwardMessage class *
 ****************************/

/**
 * A message which contains a command
 *
 * @extends TextMessage
 */
class CommandMessage extends TextMessage {
	/**
	 * Creates a new CommandMessage object
	 *
	 * @param {Object}Â message	A raw message object from an update
	 * @param {BotAPI} API	An instance of a BotAPI from teleapiwrapper which will be used to do stuff with this message
	 *
	 * @private
	 */
	constructor(message, API) {
		// Call the super constructor
		super(message, API);

		/**
		 * The arguments of the command
		 *
		 * @private
		 */
		this._args = this.text.split(" ");
		/**
		 * The command itself, without /
		 *
		 * @private
		 */
		this._command = this._args.shift().substr(1);

		// Join the arguments back to a single string
		this._args = this._args.join(" ");
	}

	/**
	 * The command of this message, without the slash
	 *
	 * @type {String}
	 * @readonly
	 */
	get command() {
		return this._command;
	}

	/**
	 * The arguments to this command, i.e. the rest of the message text
	 *
	 * @type {String}
	 * @readonly
	 */
	get argstring() {
		return this._args;
	}
}

/***********
 * Exports *
 ***********/

module.exports = CommandMessage;
